<!DOCTYPE html>
	<html>
		<head>
			<meta charset="utf-8">
			<title>Craigsville Little League</title>

			<link href="css/fullcalendar.css" rel="stylesheet" />
			<link href="css/fullcalendar.print.css" rel="stylesheet" media="print" />
			<link href="css/bootstrap.min.css" rel="stylesheet">
			<link href="css/bootstrap-reset.css" rel="stylesheet">
			<link href="css/schedule.css" rel="stylesheet">

			<!--Daterange Picker-->
			<link rel="stylesheet" type="text/css" media="all" href="css/daterangepicker.css" />
			<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.4/build/jquery.datetimepicker.min.css" />


		</head>
<body style="background-color: #424B63;">

	
<div id="wrap" style="background-color: #424B63;">

<div id="calendar"></div>

<div style="clear:both"></div>

<!--Create Modal-->
<div class="modal fade" tabindex="-1" role="dialog" id="create-modal">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" id="cancel-box-create" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title" id="create-header-text">Schedule a Game</h4>
				
			</div>
			<div class="modal-body" style="background-color: #424B63;">
				<form id="create-game-form">
					<label class="col-xs-4 font-white" for="title" id="title-label" style="margin-top: 5px;">Game Description</label>
					<input class="form-control" style="width: 350px;" type="text" name="title" id="title"/>

					<div class="row" style="padding-bottom: 10px; padding-top: 10px;">
						<div id="select-date" style="margin-top: 25px;">
							<div class="row" id="start">
								<div class="col-xs-12">
									<label class="col-xs-4 my-modal-label font-white" for="starts-at-edit" id="start-label">Starts at</label>
									<input class="form-control" style="width: 350px; margin-top: -10px;" type="text" name="starts-at" id="starts-at" placeholder="Select Start" required/>
									
								</div>
							</div>
							<div class="row" id="end">
								<div class="col-xs-12">
									<label class="col-xs-4 my-modal-label font-white" for="ends-at" id="end-label" style="margin-top:15px;">Ends at</label>
									<input class="form-control" type="text" name="ends-at" id="ends-at" style="width: 350px; margin-top: 10px;" placeholder="Select End" required/>
									
								</div>
							</div>
						</div>	
					</div>	
					<div class="row" style="padding-bottom: 10px; padding-top: 10px;">
						<div class="col-xs-12" style="border-top: 1px solid #D3D3D3; border-bottom: 1px solid #D3D3D3; padding-top:10px;">
							<label class="col-xs-4 font-white" id="details-label">Game Details</label>
						</div>
					</div>                         
					<div class="row" id="game-details" style="padding-top:10px; margin-bottom: 10px;"> 
						<div class="col-xs-12 my-modal-section">
							<label class="col-xs-4 my-modal-label font-white" for="location" id="location-label" style="margin-top:10px;">Location</label>
							<select class="form-control" style="width: 350px; margin-top: 3px;" id="location" name="location">
								<option value="" selected disabled>Select a Location</option>
								<option value="craigsville-hamrick">Hamrick Field (Craigsville)</option>
								<option value="craigsville-brown">Brown Field (Craigsville)</option>								
								<option value="cowen">Morris Field (Cowen)</option>
								<option value="richwood">City Park (Richwood)</option>
								<option value="webster-springs">Curtin Field (Bergoo)</option>
								<option value="braxton-holly-gray">Holly-Gray Park (Flatwoods)</option>
								<option value="summersville">Memorial Park (Summersville)</option>								
								<option value="braxton-frametown">Frametown (Braxton)</option>
								<option value="leivasy">Leivasy (Richwood)</option>
							</select>
						</div>     
						<div class="col-xs-12 my-modal-section">
							<label class="col-xs-4 my-modal-label font-white" for="division" id="division-label" style="margin-top:10px;">Division</label>
							<select class="form-control" style="width: 350px; margin-top: 3px;" id="division" name="division">
								<option value="" selected disabled>Select a Division</option>
								<option value="t-ball">T-Ball</option>
								<option value="" disabled>---------------</option>
								<option value="minor-bb">Minor Baseball</option>
								<option value="major-bb">Major Baseball</option>
								<option value="senior-bb">Sr. Baseball</option>
								<option value="" disabled>---------------</option>
								<option value="minor-sb">Minor Softball</option>
								<option value="major-sb">Major Softball</option>
								<option value="senior-sb">Sr. Softball</option>
							</select>
						</div>                                   
						<div class="col-xs-12 my-modal-section">
							<label class="col-xs-4 my-modal-label font-white" for="cville-team" id="cville-team-label" style="margin-top:10px;">Craigsville Team</label>
							<select class="form-control" style="width: 350px; margin-top: 3px;" id="cville-team">
								<option value="" selected disabled>Select a Team</option>
								<option value="t-ball-team-1">T-Ball 1</option>
								<option value="t-ball-team-2">T-Ball 2</option>
								<option value="t-ball-team-3">T-Ball 3</option>
								<option value="" disabled>---------------</option>
								<option value="minor-bb-team-1">Minor Baseball 1</option>
								<option value="minor-bb-team-2">Minor Baseball 2</option>
								<option value="" disabled>---------------</option>
								<option value="major-bb-team-1">Major Baseball 1</option>
								<option value="major-bb-team-2">Major Baseball 2</option>
								<option value="" disabled>---------------</option>
								<option value="senior-bb-team-1">Sr. Baseball 1</option>
								<option value="" disabled>---------------</option>
								<option value="minor-sb-team-1">Minor Softball 1</option>
								<option value="minor-sb-team-2">Minor Softball 2</option>
								<option value="" disabled>---------------</option>
								<option value="major-sb-team-1">Major Softball 1</option>
								<option value="major-sb-team-2">Major Softball 2</option>
								<option value="" disabled>---------------</option>
								<option value="senior-sb-team-1">Sr. Softball 1</option>   
								<option value="senior-sb-team-2">Sr. Softball 2</option>                                    
							</select>
						</div>
						<div class="col-xs-12">
							<label class="col-xs-4 my-modal-label font-white" for="opposing-team" id="opposing-team-label" style="margin-top:10px;">Opposing Team</label>
							<input class="form-control" style="width: 350px;" type="text" id="opposing-team" name="opposing-team">							
						</div>
						
					</div>					
				</form>                         
			</div>
			<div class="modal-footer" style="background-color: #AAB2BC !important;">
				<button type="button" class="btn btn-warning" data-dismiss="modal" aria-label="Close" id="cancel-game-create">Go Back</button>
				<button type="button" class="btn btn-success" id="create-game">Submit to Schedule</button>
			</div>
		</div>
	</div>
</div>

<!--EDIT Modal-->
<div class="modal fade" tabindex="-1" role="dialog" id="edit-modal">
	<div class="modal-dialog" role="document">
		<div class="modal-content" style="overflow:scroll; max-height:680px;">
			<div class="modal-header">
				<button type="button" class="close" id="cancel-box-edit" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title" id="update-header-text">Reschedule Game</h4>
				
			</div>
			<div class="modal-body">
				<form id="update-game-form">
					<label class="col-xs-4" for="title-edit" id="update-title-label" style="font-weight: bold; margin-top: 5px;">Game Description</label>
					<input class="form-control" style="width: 350px;" type="text" name="title-edit" id="title-edit"/>
				</form>                         
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-danger" id="delete-game" style="float: left;">Cancel Game</button>
				<button type="button" class="btn btn-warning" data-dismiss="modal" aria-label="Close" id="cancel-game-edit">Go Back</button>
				<button type="button" class="btn btn-success" id="update-game">Submit Reschedule</button>
			</div>
		</div>
	</div>
</div>

<!--delete modal-->
<div class="modal fade" tabindex="-1" role="dialog" id="delete-modal">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button id="delete-close" type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title" id="schedule-view-delete-header">Cancel Game?</h4>
			</div>
			<div class="modal-body">
				<h4 id="schedule-view-delete-modal-body">Are you sure you want to cancel <span id="remove-game" style="font-weight: bold;"></span> ?</h4>
				<div class="modal-footer">						
					<button class="btn btn-danger" data-dismiss="modal" aria-label="Close" type="button" id="cancel-delete">No</button>
					<button class="btn btn-success" type="submit" id="delete-submit">Yes</button>  
				</div>                                                         
			</div>                                    
		</div>
	</div>
</div><!--delete modal close-->

</div>


<script src="js/jquery-1.10.2.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery-ui.custom.min.js"></script>
<script src="js/fullcalendar.js"></script>
<script src="js/all_pages.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js" type="text/javascript"></script>


<!--toastr-->
<script src="assets/toastr-master/toastr.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>

<!--datepicker-->
<script type="text/javascript" src="js/daterangepicker.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.4/build/jquery.datetimepicker.full.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-dateFormat/1.0/jquery.dateFormat.min.js" type="text/javascript"></script>




<script>

	$(document).ready(function() {

		setDateFormat();

	    var date = new Date();
		var d = date.getDate();
		var m = date.getMonth();
		var y = date.getFullYear();
		var eventArray = [];
		var startDate = new Date();
		var endDate = new Date();

		$("#starts-at").datetimepicker({
			format: "MMM DD, YYYY h:mm a",
			formatTime: "h:mm a",
			formatDate: "MMM DD, YYYY",
			formData: "h:mm a",
			dynamic: true,
			defaultDate: new Date(),
			step: 30,
			autoclose: true,
		}).on("change", function() {
			dateChange = true;
			startDate = moment($("#starts-at").datetimepicker("getValue")).format("YYYY-MM-DDTHH:mm:ssZZ");
			endDate = moment($("#starts-at").datetimepicker("getValue")).add(120, "minutes").format("YYYY-MM-DDTHH:mm:ssZZ");
			$("#ends-at").val(moment($("#starts-at").datetimepicker("getValue")).add(120, "minutes").format("MMM DD, YYYY h:mm a"));
			$("#starts-at").css("border-color", "#e2e2e4");
			//selectedPickerDate = $("#ends-at").datetimepicker("option", "minDate", moment($("#starts-at").datetimepicker("getValue")).add(15, "minutes").format("MMM DD, YYYY h:mm a"));  
		});

		$("#ends-at").datetimepicker({
			format: "MMM DD, YYYY h:mm a",
			formatTime: "h:mm a",
			formatDate: "MMM DD, YYYY",
			formData: "h:mm a",
			dynamic: true,
			defaultDate: new Date(),
			autoclose: true,
			step: 30
		}).on("change", function() {
			$("#ends-at").css("border-color", "#e2e2e4");
			endDate = moment($("#ends-at").datetimepicker("getValue")).format("YYYY-MM-DDTHH:mm:ssZZ");
		});

		$("#starts-at-edit").datetimepicker({
			format: "MMM DD, YYYY h:mm a",
			formatTime: "h:mm a",
			formatDate: "MMM DD, YYYY",
			formData: "h:mm a",
			dynamic: true,
			defaultDate: new Date(),
			step: 30,
			autoclose: true,
		}).on("change", function() {
			dateChange = true;
			//startEdit = moment($("#starts-at-edit").datetimepicker("getValue")).format("YYYY-MM-DDTHH:mm:ssZZ");
			//endEdit = moment($("#starts-at-edit").datetimepicker("getValue")).add(appSettingDefaultLength, "minutes").format("YYYY-MM-DDTHH:mm:ssZZ");
			$("#ends-at-edit").val(moment($("#starts-at-edit").datetimepicker("getValue")).add(appSettingDefaultLength, "minutes").format("MMM DD, YYYY h:mm a"));
			$("#starts-at-edit").css("border-color", "#e2e2e4");
			//selectedPickerDate = $("#ends-at-edit").datetimepicker("option", "minDate", moment($("#starts-at-edit").datetimepicker("getValue")).add(15, "minutes").format("MMM DD, YYYY h:mm a"));  
		});

		$("#ends-at-edit").datetimepicker({
			format: "MMM DD, YYYY h:mm a",
			formatTime: "h:mm a",
			formatDate: "MMM DD, YYYY",
			formData: "h:mm a",
			dynamic: true,
			defaultDate: new Date(),
			autoclose: true,
			step: 30
		}).on("change", function() {
			$("#ends-at-edit").css("border-color", "#e2e2e4");
			//endEdit = moment($("#ends-at-edit").datetimepicker("getValue")).format("YYYY-MM-DDTHH:mm:ssZZ");
			//compareEditTime(startEdit, endEdit)
		});

		$("#create-game").on("click", function() {
			submitGameEvent();
		});

		//----------------------------------------------------------------
		/*function servicesMenu(forSelect) {

			if(forSelect.data.services.length > 0){

				var makingHTMLText = "";
				var compareId = "";  

				for (i=0; i<forSelect.data.services.length; i++){

					var label = forSelect.data.services[i].service_basic_label;
					var id = forSelect.data.services[i].id;
					var selected = "";   

					for (j=0; j<serviceId.length; j++){       
						if(serviceId[j] != undefined){
							compareId = serviceId[j].id;
						} 
					if(compareId === id){
						selected = true;}
					}
						if (selected == true){
							makingHTMLText += "<option value=\"" + id + "\" selected=\"" + selected + "\">" + label + "</option>";
					} else {
						selected = "";
							makingHTMLText += "<option value=\"" + id + "\" " + selected + ">" + label + "</option>";
					}
					
				}   
				
				$("#services-repeatable").html(makingHTMLText);
				$("#edit-services").html(makingHTMLText);         
			}  
		}*/
		
		/*  className colors
		
		className: default(transparent), important(red), chill(pink), success(green), info(blue)
		
		*/		
	
	
		/* initialize the calendar
		-----------------------------------------------------------------*/
		eventArray = [
				{
					id: 1,
					title: "Repeating Event",
					start: new Date(y, m, d-3, 16, 0),
					allDay: false,
					className: "info"
				},
				{
					id: 2,
					title: "Repeating Event",
					start: new Date(y, m, d+4, 16, 0),
					allDay: false,
					className: "info"
				},
				{
					id: 3,
					title: "Meeting",
					start: new Date(y, m, d, 10, 30),
					allDay: false,
					className: "important"
				},
				{
					id: 4,
					title: "Lunch",
					start: new Date(y, m, d, 12, 0),
					end: new Date(y, m, d, 14, 0),
					allDay: false,
					className: "important"
				},
				{
					id: 5,
					title: "Birthday Party",
					start: new Date(y, m, d+1, 19, 0),
					end: new Date(y, m, d+1, 22, 30),
					allDay: false,
				}
			];	
		
		var calendar =  $("#calendar").fullCalendar({
			header: {
				left: "title",
				center: "agendaDay,agendaWeek,month",
				right: "prev,next New"
			},
			editable: true,
			firstDay: 0, //  1(Monday) this can be changed to 0(Sunday) for the USA system
			selectable: true,
			defaultView: "month",
			dayClick: function(date, jsEvent, view) {
				$("#create-modal").modal("show");
			},
			axisFormat: "h:mm",
			columnFormat: {
                month: "ddd",    // Mon
                week: "ddd d", // Mon 7
                day: "dddd M/d",  // Monday 9/7
                agendaDay: "dddd d"
            },
            titleFormat: {
                month: "MMMM yyyy", // September 2009
                week: "MMMM yyyy", // September 2009
                day: "MMMM yyyy"                  // Tuesday, Sep 8, 2009
            },
			allDaySlot: false,
			events: eventArray,
			eventClick: function(event, element, view) {
				$("#edit-modal").modal("show");
				console.log(event);
			}	
		});

		//-------------------------------------------------------
		// Submit create function
		function submitGameEvent() {
			newId = eventArray.length;
			eventArray.push({
				"id"							: newId,
				"title"                   		: $("#title").val(),
				"start"                    		: new Date(y, m, d+5, 16, 0),
				//"end"                      		: endDate,
				"is_all_day"                    : false,
				"craigsville_team"              : $("#craigsville-team").val(),
				"opposing_team"                 : $("#opposing-team").val(),
				"division"                    	: $("#division").val(),
				"location"                    	: $("#location").val(),
				//"chief_umpire"              	: $("#provider-repeatable").val(),
				//"umpire_1"                   	: $("#address-repeatable").val(),
				//"umpire_2"                  	: $("#address-repeatable").val(),
				//"concession_1"                  : $("#contact-repeatable").val(),
				//"concession_2"                  : $("#address-repeatable").val(),
				//"board_member"					: $("#repeat-uses-photos-checkbox").is(":checked"),
				//"scorekeeper"					: $("#repeat-uses-notes-checkbox").is(":checked"),
				"className:"					: "info"
				
			}); 
			console.log(eventArray);
			$("#create-modal").modal("hide");
			$("#calendar").fullCalendar("removeEvents");				
			$("#calendar").fullCalendar("addEventSource", eventArray);
			
			/*axios({
				method  : "POST",
				url     : apiPathProtected + "game",
				data    : JSON.stringify(formData),
				headers : {
					"X-Access-Token" : user.token,
					"Content-Type": "application/json"
				}
			})
			.then(function (response) {
				if(response){					 
				
				}
			})
			.catch(function (error) {				
				console.log(error);
				if (error.response) {					
					console.log(error.response.data);
					console.log(error.response.status);
					console.log(error.response.headers);
				}                
			});*/

		}  
	
	});

</script>
</body>
</html>
